(function(){var FLEX_CMP_DATA_STR="data-flex-name";var FLEX_CMP_REGISTERED_STR="data-flex-registered";var FLEX_CMP_INITIALIZED_STR="data-flex-initialized";var FLEX_CMP_DELAY_LOAD_STR="data-flex-delay-load";var FLEX_CMP_INSTANCE_STR="data-flex-instance";var FLEX_CMP_PROPS_STR="data-flex-props";var FLEX_CMP_EXTRA_STR="data-flex-extra";window.FLEX={components:[],elements:[],init:function(){for(var x in this.components){if(this.components[x]['properties']&&!!this.components[x]['properties']['autoInitialize']){this.components[x].helperFunctions=this.helperFunctions;this.components[x].initialize();}}
var elements=document.querySelectorAll("["+FLEX_CMP_DATA_STR+"]");for(var x in elements){if(elements.hasOwnProperty(x)&&x!="length"){var element=elements[x];var cmpName=element.getAttribute(FLEX_CMP_DATA_STR);if(!this.components[cmpName]){console.error("Unable to find component ("+cmpName+"), please make sure it has been included and registered");continue;}
if(!element.getAttribute(FLEX_CMP_REGISTERED_STR)){var newComponent=this.helperFunctions.clone(this.components[cmpName]);element.setAttribute(FLEX_CMP_INSTANCE_STR,newComponent);element.setAttribute(FLEX_CMP_REGISTERED_STR,"true");newComponent.element=element;newComponent.helperFunctions=this.helperFunctions;newComponent.properties=newComponent.properties||{};var resObj=null;var extra=element.getAttribute(FLEX_CMP_EXTRA_STR);if(extra){resObj=this.helperFunctions.resolveObject(extra);if(!resObj){console.error("Failed to locate extended properties for component "+cmpName+" defined at: "+extra);}else{this.helperFunctions.merge(newComponent,resObj);}}
var props=element.getAttribute(FLEX_CMP_PROPS_STR);if(props){resObj=this.helperFunctions.resolveObject(props);if(!resObj){console.error("Failed to locate properties for component "+cmpName+" defined at: "+props);}else{this.helperFunctions.merge(newComponent.properties,resObj);}}
if(!element.getAttribute(FLEX_CMP_DELAY_LOAD_STR)){if(newComponent.initialize&&newComponent){newComponent.initialize();element.setAttribute(FLEX_CMP_INITIALIZED_STR,"true");}else{console.error("Failed to initialize component:"+cmpName);}}}}}},helperFunctions:{emit:function(eventName,eventParams){$(document).trigger(eventName,eventParams);},clone:function(obj){var copy;if(null==obj||"object"!=typeof obj)return obj;if(obj instanceof Date){copy=new Date();copy.setTime(obj.getTime());return copy;}
if(obj instanceof Array){copy=[];for(var i=0,len=obj.length;i<len;i++){copy[i]=this.clone(obj[i]);}
return copy;}
if(obj instanceof Object){copy={};for(var attr in obj){if(obj.hasOwnProperty(attr)){if(obj[attr]instanceof RegExp){copy[attr]=obj[attr];}else{copy[attr]=this.clone(obj[attr]);}}}
return copy;}
throw new Error("Unable to copy obj! Its type isn't supported.");},hasClass:function(el,className){if(el.classList)
return el.classList.contains(className);else
return!!el.className.match(new RegExp('(\\s|^)'+className+'(\\s|$)'))},addClass:function(el,className){if(el.classList)
el.classList.add(className);else if(!this.hasClass(el,className))el.className+=" "+className},removeClasses:function(el,classList){for(var i=0;i<classList.length;i++){this.removeClass(el,classList[i]);}},removeClass:function(el,className){if(el.classList)
el.classList.remove(className);else if(this.hasClass(el,className)){var reg=new RegExp('(\\s|^)'+className+'(\\s|$)');el.className=el.className.replace(reg,' ')}},merge:function(target){'use strict';if(target===undefined||target===null){throw new TypeError('Cannot convert undefined or null to object');}
var output=Object(target);for(var index=1;index<arguments.length;index++){var source=arguments[index];if(source!==undefined&&source!==null){for(var nextKey in source){if(source.hasOwnProperty(nextKey)){output[nextKey]=source[nextKey];}}}}
return output;},resolveObject:function(objDef){try{return JSON.parse(objDef);}catch(ex){var objDefStructure=objDef.split(".");var lastObject=window;if(objDefStructure.length>0){for(var y in objDefStructure){if(objDefStructure.hasOwnProperty(y)){if(lastObject[objDefStructure[y]]){lastObject=lastObject[objDefStructure[y]];}else{return false;}}}
return lastObject;}}},onLoad:function(fnc){var self=this;document.addEventListener('FLEXInitialized',function(){fnc.call(self);});},}};FLEX.components['SystemNotification']={properties:{visibleClass:"visible",errorSymbol:"",successSymbol:"",infoSymbol:"",warningSymbol:"",closeSymbol:"",autoCloseTimeout:null,classList:['success','error','info']},autoCloseTimeout:null,initialize:function(){this.helperFunctions.addClass(this.element,'systemnotification');var self=this;$(document).on('open_system_notification',function(evt,params){self.show(params.class,params.message,params.properties);});$(document).on('close_system_notification',function(evt,params){self.hide();});return true;},render:function(message,className){var self=this;$("button",this.element).click(function(){});$(this.element).click(function(event){self.onClick.call(self,event)});var $container=$("<div class='wrapper'>");var $subContainer=$("<div class='col-xs-12 noPadding'>");$("<div>").addClass("col-xs-1 text-left noPadding").html($("<img>").attr("src",this.properties[className+'Symbol'])).appendTo($subContainer);$("<div>").addClass("col-xs-10 text-left").text(message).appendTo($subContainer);$("<div>").addClass("col-xs-1 text-right noPadding").html($("<img>").attr("src",this.properties.closeSymbol)).click(function(event){self.hide.call(self);}).appendTo($subContainer);$subContainer.appendTo($container);$(this.element).html("");$container.appendTo(this.element);},onClick:function(){this.hide();},removeAllTypeClasses:function(){for(var j in this.properties.classList){if(this.properties.classList.hasOwnProperty(j)){this.helperFunctions.removeClass(this.element,this.properties.classList[j]);}}},show:function(className,message,props){props=props||{};var self=this;var tmpProps=FLEX.helperFunctions.clone(this.properties);FLEX.helperFunctions.merge(tmpProps,props);this.render(message,className);this.helperFunctions.removeClasses(this.element,this.properties.classList);this.helperFunctions.addClass(this.element,className);this.helperFunctions.addClass(this.element,this.properties.visibleClass);if(tmpProps['autoCloseTimeout']){clearTimeout(this.autoCloseTimeout);this.autoCloseTimeout=setTimeout(function(){self.hide();},tmpProps.autoCloseTimeout*1000);}
$(this.element).css("top",0);},hide:function(){var self=this;$(this.element).css("top",$(this.element).height()*-1);self.removeAllTypeClasses();}};FLEX.components['FieldConcatenator']={properties:{idList:[],finalField:null,concatenateWith:"-",},initialize:function(){var self=this;$(document).on('formFieldValidated',function(evt,data){if(self.properties.idList.indexOf($(data.field).attr("id"))>=0){var allValidated=true;var concatenatedValue="";for(var i=0;i<self.properties.idList.length;i++){var ele=$("#"+self.properties.idList[i]);if(!ele.hasClass("validated")){allValidated=false;}else{if(concatenatedValue!=""){concatenatedValue+=self.properties.concatenateWith;}
concatenatedValue+=ele.val();}}
if(!allValidated){concatenatedValue="";}
$("#"+self.properties.finalField).val(concatenatedValue)}});return true;}};FLEX.components['FormValidation']={properties:{disableSubmitOnInvalidValues:true,validateWholeForm:false,validateOnSubmitOnly:false,validateOnInitialize:true,validateOnBlur:true,validateOnChange:false,beforeSubmit:null,submitOnRequest:false,displayErrors:'notification',validations:{name:/^[a-zA-Z ]*$/,email:/^[+a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/,ip:/^(\d{1,3}\.){3}\d{1,3}$/,date:/^\d{2}[- \/.]\d{2}[- \/.]\d{4}$/,datetime:/^\d{2}[- \/.]\d{2}[- \/.]\d{4}\s?\d{2}[- :.]\d{2}$/,phone:/^\(?([0-9]{3})\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$/,zipUS:/^(\d{5})(-\d{4})?$/,zipCanada:/^[a-z][0-9][a-z]\s?[0-9][a-z][0-9]$/i,zip:/^(?:[A-Z0-9]+([- ]?[A-Z0-9]+))?$/,cityUS:/^[A-Za-z]/,creditCard:/^\d{13,16}$/,numeric:/^\d+$/,number:/^\d+$/,ssn:/^(\d{3}-?\d{2}-?\d{4})|(xxx-xx-xxxx)$/i,cvvnum:/^\d+$/,dollar:/^[$0-9]+/,numericNotRequired:/^\d$/,decimal:/^[0-9\.,]+$/,decimalNotRequired:/^[0-9\.,]$/,alphabet:/^[A-Za-z]/,alphabetWithUnderscore:/^[A-Za-z_]/,alphabetWithSpace:/^[A-Za-z ]/,alphanumeric:/^([a-z]|\d|\s|-|\.|_|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+$/i,alphanumericWithUnderscore:/^[A-Za-z0-9_]$/,alphanumericWithSpace:/^[A-Za-z0-9 ]$/,year:/^\d+$/,month:/^\d+$/,day:/^\d+$/,nopobox:/^[^p][^.]*[^o][^.]*[^ ]*[^b][^o][^x]$/i,physicalAddress:/^[0-9a-zA-Z,. @#$%&*'`_-]*$/},dataTypes:{numeric:/\d/,email:/[-a-zA-Z0-9._@]/,alphanumeric:/[a-zA-Z0-9]/,}},errorMessages:feErrorObj,initialize:function(){var self=this;$(":input",this.element).each(function(){if($(this).attr("type")=='submit'){return;}
if(self.properties.validateOnChange&&!self.properties.validateOnSubmitOnly){this.onchange=function(){if(self.properties.validateWholeForm){self.validateForm(false);}else{self.doValidate(false,false,element);}};}
if(self.properties.validateOnBlur&&!self.properties.validateOnSubmitOnly){this.onblur=function(){if(self.properties.validateWholeForm){self.validateForm(false);}else{self.doValidate(false,this);}};}
this.onkeydown=function(e){if(this.getAttribute("datatype")){if(!self.properties.dataTypes[this.getAttribute("datatype")]){console.log("DataType found for input but no associated data type found to check against");}else{var allowedKeyCodes=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,45,46,91,112,113,114,115,116,117,118,119,120,121,122,123,144,]
if(((e.metaKey||e.ctrlKey)&&(e.key=='v'||e.keyCode==118||e.keyCode==86))||allowedKeyCodes.indexOf(e.keyCode)>=0){return;}
var keycode=e.keyCode;var _to_ascii={'188':'44','109':'45','190':'46','191':'47','192':'96','220':'92','222':'39','221':'93','219':'91','173':'45','187':'61','186':'59','189':'45'};if(e.keyCode>=96&&e.keyCode<=105){keycode=keycode-48;}else if(_to_ascii[e.keyCode]){keycode=_to_ascii[e.keyCode];}
var r=new RegExp(self.properties.dataTypes[this.getAttribute("datatype")]);if(!String.fromCharCode(keycode).match(r)){e.preventDefault();}}}};});$(":submit",this.element).click(function(e){if(self.properties.validateOnSubmitOnly){if(!self.validateForm()){e.preventDefault(e);e.stopPropagation(e);}
if(self.properties.beforeSubmit&&!self.properties.beforeSubmit()){e.preventDefault(e);e.stopPropagation(e);}
return;}
if(self.properties.submitOnRequest){if(self.validateForm()){self.helperFunctions.emit('valid_form_submit',{form:self.element});}
e.stopPropagation(e);e.preventDefault(e);}});if(typeof this.errorMessages!=="Object"&&this.errorMessages!=""){this.errorMessages=JSON.parse(this.errorMessages);}
return true;},validateForm:function(onInit){var $elements=$(":input",this.element);for(var i=0;i<$elements.length;i++){if(!this.doValidate(onInit,$elements[i])){return false;}}
return true;},doValidate:function(onInit,element,silent){onInit=onInit||false;var formValidated=true;var failedFieldCode=null;var failedField=null;var errorMessage=null;if(!this.validateInput(element)){formValidated=false;if(!onInit&&!silent){failedFieldCode=$(element).data("code");failedField=element;for(var j=0;j<this.errorMessages.length;j++){if(this.errorMessages[j].error_code==failedFieldCode){errorMessage=this.errorMessages[j].message;}}
this.onInvalidInput(failedField,failedFieldCode,errorMessage);}}else{this.onValidInput(element);}
var $submitButton=$("input[type='submit']",this.element);if(!formValidated){if(this.properties.disableSubmitOnInvalidValues){$submitButton.attr("disabled","disabled");}
this.onInvalidForm(failedField,failedFieldCode,errorMessage);return false;}else{if(this.properties.disableSubmitOnInvalidValues){$submitButton.removeAttr("disabled","false");}
this.onValidForm();return true;}},validateInput:function(element){var $element=$(element);if(!$element.is(":visible")){return true;}
var isMandatory=$element.attr("mandatory")?true:false;var maxLength=$element.attr("maxlength");var minLength=$element.attr("minlength");var placeHolder=$element.attr("placeHolder");var $elementType=$(element).attr("type");if(element.nodeName.toLowerCase()==="textarea"){$elementType="text";}else if(element.nodeName.toLowerCase()==="select"){$elementType="select";}
switch($elementType){case'':case'text':var value=$element.val();var regEx=$element.data("validate");placeHolder=placeHolder||"";if((!value||(value===placeHolder.trim()))&&isMandatory){return false;}else{if(value.length<minLength){return false;}
if(value.length>maxLength){return false;}
if(regEx){if(!this.properties.validations[regEx]){console.error("Validation requirement found, but no pattern to check against found.");}
if(!value.match(this.properties.validations[regEx])){return false;}}}
var groupName=$element.attr("data-flex-group");if(groupName&&$element.attr("data-flex-confirm")){var $groupElements=$("[data-flex-group='"+groupName+"']",this.element);var isValidated=true;$groupElements.each(function(){if(value!=$(this).val()){isValidated=false;}});return isValidated;}
break;case'select':if(isMandatory){var value=$element.val();if(value===""||value===null){return false;}}
var groupName=$element.attr("data-flex-group");if(groupName){var $groupElements=$("[data-flex-group='"+groupName+"']",this.element);$groupElements.each(function(){if(value!=$(this).val()){if($($element).attr("data-flex-confirm")){return false;}}});}
break;case'checkbox':case'radio':if(isMandatory){var checkedTest=$("input[name='"+$element.attr("name")+"']").is(":checked");if(!checkedTest){return false;}}
var groupName=$element.attr("data-flex-group");if(groupName){var $groupElements=$("[data-flex-group='"+groupName+"']",this.element);$groupElements.each(function(){if(value!=$(this).val()){if($($element).attr("data-flex-confirm")){return false;}}});}
break;default:break;}
return true;},onInvalidForm:function(errorField,errorCode,errorMessage){if(this.properties.displayErrors==='notification'){this.helperFunctions.emit('open_system_notification',{class:"error",message:errorMessage});}},onInvalidInput:function(errorField,errorCode,errorMessage){switch(this.properties.displayErrors){case'beforeInput':$(errorField).prev("span.error").remove();$(errorField).before('<span class="error">'+errorMessage+'</span>');break;case'afterInput':$(errorField).next("span.error").remove();$(errorField).after('<span class="error">'+errorMessage+'</span>');break;case'notification':this.helperFunctions.emit('open_system_notification',{class:"error",message:errorMessage});default:break;}
this.helperFunctions.emit('formFieldInvalidated',{field:errorField});$(errorField).addClass("error").removeClass("validated");},onValidInput:function(field){$(field).removeClass("error").addClass("validated");switch(this.properties.displayErrors){case'beforeInput':$(field).prev("span.error").remove();break;case'afterInput':$(field).next("span.error").remove();break;case'notification':default:break;}
this.helperFunctions.emit('formFieldValidated',{field:field});if(!this.properties.validateOnSubmitOnly){this.helperFunctions.emit('close_system_notification');}},onValidForm:function(){this.helperFunctions.emit('close_system_notification');}};FLEX.components['externalLinks']={properties:{autoInitialize:true,},initialize:function(){$("a[href^='http://'],a[href^='https://']").each(function(){var a=new RegExp('/'+window.location.host+'/');if(!a.test(this.href)){$(this).click(function(event){event.preventDefault();event.stopPropagation();window.open(this.href,'_blank');});}});}};FLEX.components['reloadCaptcha']={properties:{autoInitialize:true,reloadImg:"reload_icon"},initialize:function(){var self=this;FLEX.helperFunctions.onLoad(function(){if($(".captcha").is(':visible')){$(".captcha").after("<img src='"+FLEX.helperFunctions.resolveObject(self.properties.reloadImg)+"' alt='reload' class='reloadCaptcha'/>");$('.reloadCaptcha').on('click',function(){$(".captcha").attr("src","./stickyImg?"+Math.random());});}});}};FLEX.components['mobileSubNav']={properties:{autoInitialize:true,eventType:'click',navWrapperClass:"mobile-tabs",},initialize:function(){var self=this;var firstSubMenu=$('.'+self.properties.navWrapperClass);if(firstSubMenu.length>0&&($(firstSubMenu[0]).data("registered"))){return;}
$('.'+self.properties.navWrapperClass+' ul.ui-widget-header').find('li:first-child').addClass('ui-state-active');var first=$('.'+self.properties.navWrapperClass+' ul.ui-widget-header').find('li:first-child a').html();var itemClick=$('.'+self.properties.navWrapperClass+' ul.ui-widget-header li a').attr('id');var $acctMenuIcon=$('.accountMenuIcon');var $constText=$acctMenuIcon.data("const-text");$('.accountMenuIcon').find('img').removeClass('slide');$('.'+self.properties.navWrapperClass+' ul.ui-widget-header li').each(function(){var isActive=$(this).data('controls');var isText=$(this).find('a').html();if($constText&&$constText!=""){$("span",$acctMenuIcon).html($constText);}
else if(isActive==page){$("span",$acctMenuIcon).html(isText);}else{$("span",$acctMenuIcon).html(first);}});$('.accountMenuIcon').off(this.properties.eventType).on(this.properties.eventType,function(e){e.stopPropagation();self.$imgClass=$(this).find('img');if(self.$imgClass.hasClass('slide')){self.$imgClass.removeClass('slide');$(".mobileNav").hide();}else{self.$imgClass.addClass('slide');$(".mobileNav").show();}});$('.'+self.properties.navWrapperClass+' ul.ui-widget-header li').on(this.properties.eventType,function(e){var tab_id=$(this).attr('data-controls');var aText=$(this).find('a').text();var $acctMenuIcon=$(".accountMenuIcon");var constText=$acctMenuIcon.data("const-text");$("span",$acctMenuIcon).html(($constText&&$constText!="")?$constText:aText);$('.ui-widget-header li').removeClass('ui-state-active').show();$(this).addClass('ui-state-active').hide();var loc=$(tab_id);var target=$(this).find('a').attr('href');if(target.indexOf("#")>=0){}else{window.location.href=target;e.stopPropagation();e.preventDefault();}
$('.accountMenuIcon img').removeClass('slide');$(".mobileNav").hide();});$(firstSubMenu[0]).data("registered","true");}}
FLEX.components['tooltips']={properties:{autoInitialize:true,},initialize:function(){var self=this;FLEX.helperFunctions.onLoad(function(){self.adjustTips();self.focusTips();self.hoverTips();});},adjustTips:function(){var winWidth=$(window).width();if(winWidth<=767&&$('[class*=hint--]').hasClass('hint--right')){$('[class*=hint--]').toggleClass('hint--right hint--top');}},focusTips:function(){var toolTip=$('[class*=hint--] input');toolTip.each(function(i){$(this).focusin(function(){$(this).parent().addClass('hint--always');});$(this).focusout(function(){$(this).parent().removeClass('hint--always');});});},hoverTips:function(){var hoverTip=$('[class*="hoverTip"]');hoverTip.each(function(i){$(this).mouseenter(function(event){$(this).addClass('hint--always');});$(this).mouseleave(function(event){$(this).removeClass('hint--always');});});}};FLEX.components['imagePreview']={properties:{previewSelector:'preview',previewHint:'hint--right',xOffset:-25,yOffset:0},initialize:function(){var xOffset=this.properties.xOffset,yOffset=this.properties.yOffset,self=this,prevID='#'+this.properties.previewSelector;$('.'+self.previewSelector).mouseenter(function(e){var imgSrc=$(this).attr('data-image'),prevHint=$(this).attr("class"),imgHeight=0;$(this).append("<p id="+self.properties.previewSelector+" ><img src='"+imgSrc+"' alt='Image preview' /></p>");$(prevID+' img').load(function(){$(prevID).addClass(prevHint);imgHeight=$(prevID+' img').height();if($(prevID).hasClass('hint--top')&&!$(prevID).hasClass('visible')){$(prevID).css({"top":(-imgHeight-yOffset)+"px","right":(xOffset)+"px"}).addClass('visible');}else if($(prevID).hasClass('hint--right')&&!$(prevID).hasClass('visible')){$(prevID).css({"top":(-20)+"px","right":(-imgHeight-xOffset*-12)+"px"}).addClass('visible');}else if($(prevID).hasClass('hint--bottom')&&!$(prevID).hasClass('visible')){$(prevID).css({"top":(imgHeight+yOffset)+"%","left":(-imgHeight+xOffset)+"%"}).addClass('visible');}else{e.preventDefault();}});});$('.'+this.previewSelector).mouseleave(function(){$(prevID).removeClass('visible');setTimeout(function(){while($(prevID).length!==0){$(prevID).remove();}},200);});if($('img').attr('src')==''){$(this).hide();}else{$(this).show();}}};FLEX.components['accordion']={properties:{autoInitialize:true,},initialize:function(){FLEX.helperFunctions.onLoad(function(){var indexCount=0;$(".accordion").each(function(){$(".accordion-toggle",this).attr("href","#acc"+indexCount);$(".panel-collapse",this).attr("id","acc"+indexCount);indexCount++;});$(".accordionsFAQ").each(function(){$(".accordion-toggle",this).attr("data-parent","#accordionsFAQ"+indexCount);$(".accordion-toggle",this).attr("href","#faq"+indexCount);$(".faq-collapse",this).attr("id","faq"+indexCount);$(".faq-group",this).attr("id","faq"+indexCount);indexCount++;});});}};FLEX.components['langChange']={properties:{languageMain:'en',},initialize:function(){var self=this;var languageBtn=$(".language-dropdown dt a",this.element);var languageItem=$(".language-dropdown dd ul li a",this.element);var countryHeader=$("#change_heading",this.element);var countrySubTitle=$(".userCountry",this.element);$(languageBtn).click(function(){FLEX.modal.popup({'className':'change-popup','title':$('#change_heading',this.element).html(),'content':$('#language_body',this.element).html()});});$(languageItem).click(function(){var text=$(this).html();var id=$(this).find('span').html();$(".language-dropdown dt a span").html(text);FLEX.modal.removeLoading();self.getSelectedValue(id);});$(document).bind('click',function(e){var $clicked=$(e.target);if(!$clicked.parents().hasClass("language-dropdown"))
FLEX.modal.removeLoading();});},getSelectedValue:function(id){this.changeLang(id);return $(id);return $(id).find("dt a span.value",this.element).html();},changeLang:function(languageSelected){var languageofChoice=$(".language-dropdown dt a",this.element).html();var language=$(".language-dropdown dt a span",this.element).html();var languageChoice=languageSelected;var languageSelected=$(".language-dropdown dt a",this.element).find('span').attr("id");var url=window.location.href;if(url.indexOf("?")>-1){url=url.substr(0,url.indexOf("?"));}
url=url.concat("?lang=",languageChoice,"&")
window.location.href=url;if(languageChoice===languageSelected){languageofChoice.html(self.properties.languageMain);}else{$(".language-dropdown dt a span",this.element).html(language);}}};FLEX.components['InfiniteRotator']={properties:{imageHolder:'#rotatingImage',itemInterval:10000},initialize:function(){var self=this;self.count=0;self.imagePaths=$('img',this.element);if(self.imagePaths!=undefined){self.start();}},start:function(){var imageCount=imgArr.length;self.interval=setInterval(function(){$(self.properties.imageHolder).attr("src",self.imagePaths[self.count].getAttribute("src"));if(self.count++>=imageCount)
self.count=0;},self.properties.itemInterval);},stop:function(){clearInterval(self.interval);}};FLEX.components['CountryChange']={properties:{countryMain:'<span><img class="flag" src="./static/'+siteRoot+'/images/icons/flagIconUS.png" alt="" /></span>',},initialize:function(){var self=this;var countryBtn=$(".country-dropdown dt a",this.element);var countryItem=$(".country-dropdown dd ul li a",this.element);var countrySubTitle=$(".userCountry").html();$(countryBtn).click(function(){FLEX.modal.popup({'className':'change-popup','title':$('#change_heading').html(),'content':$('#language_body').html()});});$(countryItem).click(function(){var text=$(this).html();var id=$(this).find('span').html();$(".country-dropdown dt a span",self.element).html(text);self.getSelectedValue(id);});$(document).bind('click',function(e){var $clicked=$(e.target);if(!$clicked.parents().hasClass("country-dropdown"))
FLEX.modal.removeLoading();});},getSelectedValue:function(id){this.changeCountry(id);return $(id).find("dt a span.value").html();},changeCountry:function(countrySelected){var countryofChoice=$(".country-dropdown dt a").html();var countryFlag=$(".country-dropdown dt a span").html();var countryChoice=countrySelected;var countrySelected=$(".country-dropdown dd ul li a").find('span').html();var url=window.location.href;if(url.indexOf("?")>-1){url=url.substr(0,url.indexOf("?"));}
url=url.concat("./?country=",countryChoice,"&")
window.location.href=url;if(countryChoice===countrySelected){countryofChoice.html(self.properties.countryMain);}else{$(".country-dropdown dt a span").html(countryFlag);}}};FLEX.components['navigation']={properties:{autoInitialize:true,addToMenuClass:"addToMenu",dropdownArrow:"<img src='/static/"+siteRoot+"/images/dropdownArrow.png' />",topMenuWrapperID:"topNavigation",publicLink:"public",privateLink:"private",mainMenuWrapperID:"navigationMain",menuEaseClass:"menuEase",mobileButtonID:"mobileButton",mobileMenuClass:"mobileMenu",mobileMenuWrapperID:"mobileMenuWrapper",mobileThreshold:777,mobileHomeID:"/home",siteWrapperID:"siteWrapper",},initialize:function(){var mobileMenuItems,mobileTopMenuItems,mobileMenuWidth,addToMenuClass,self=this;$("#"+this.properties.mainMenuWrapperID+"li:has(ul),"+this.properties.mobileMenuClass+"li:has(ul)").each(function(){$(self).find("ul").before(this.dropdownArrow);});if($("#"+this.properties.topMenuWrapperID).find("li."+this.privateLink).html()){mobileTopMenuItems=$("#"+this.topMenuWrapperID+" ."+this.privateLink).clone();}else{mobileTopMenuItems=$("#"+this.topMenuWrapperID+" ."+this.publicLink).clone();}
mobileMenuItems=$("#"+this.properties.mainMenuWrapperID).children().clone();addToMenuClass=$("."+this.properties.addToMenuClass).clone();$("body").wrapInner("<section id='"+this.properties.siteWrapperID+"'></section>");$("#"+this.properties.siteWrapperID).after("<section id='"+this.properties.mobileMenuWrapperID+"'><ul class='"+this.properties.mobileMenuClass+"'></ul></section>");$(mobileTopMenuItems).appendTo("."+this.properties.mobileMenuClass);$(mobileMenuItems).appendTo("."+this.properties.mobileMenuClass);addToMenuClass.appendTo("."+this.properties.mobileMenuClass);mobileMenuWidth=$("#"+this.properties.mobileMenuWrapperID).width();this.element=$("#"+this.properties.siteWrapperID).get(0);$("#"+this.properties.mobileButtonID).on({touchmove:function(e){var touch=e.originalEvent.targetTouches[0];$(this).removeClass(self.properties.menuEaseClass).css({left:mobileMenuWidth});$("#"+self.properties.mobileMenuWrapperID).removeClass(self.properties.menuEaseClass).css({left:0});if(touch.pageX<=0){e.preventDefault();}else if(touch.pageX>=mobileMenuWidth){e.preventDefault();}else{$(this).css({left:touch.pageX});$("#"+self.properties.mobileMenuWrapperID).css({left:touch.pageX-mobileMenuWidth});}},touchend:function(e){var touch=e.originalEvent.changedTouches[0];if(touch.pageX>=(mobileMenuWidth/2)){$(this).addClass(self.properties.menuEaseClass).css({left:mobileMenuWidth});$("#"+self.properties.mobileMenuWrapperID).addClass(self.properties.menuEaseClass).css({left:0});}else if(touch.pageX<=(mobileMenuWidth/2)){$(this).addClass(self.properties.menuEaseClass).css({left:0});$("#"+self.properties.mobileMenuWrapperID).addClass(self.properties.menuEaseClass).css({left:-mobileMenuWidth});}},click:function(){if($("#"+self.properties.mobileMenuWrapperID).hasClass("open")){$("body").css({"overflow":"visible"});$(this).css({"left":0});$("#"+self.properties.mobileMenuWrapperID).removeClass("open").css({"left":-mobileMenuWidth});$("#"+this.id).css({"display":''});}else{$("body").css({"overflow":""});$("#"+self.properties.mobileMenuWrapperID).css({"opacity":1.0});$(this).css({"left":mobileMenuWidth});$("#"+self.properties.mobileMenuWrapperID).addClass("open").css({"left":0});$("#"+this.id).css({"display":'block'});}}});$("#pageContentWrapper").on({mouseup:function(){if($("#"+self.properties.mobileButtonID).css("left")==mobileMenuWidth){$("body").css({"overflow":"hidden"});$("#"+self.properties.mobileMenuWrapperID).css({"opacity":1.0});$("#"+self.properties.mobileMenuWrapperID).addClass("open").css({"left":mobileMenuWidth});$("#"+self.element.id).css({"display":'block'});}else{$("#"+self.properties.mobileMenuWrapperID).css({"opacity":0.4});$("body").css({"overflow":""});$("#"+self.properties.mobileMenuWrapperID).removeClass("open").css({"left":-mobileMenuWidth});$(this).css({"left":0});$("#"+self.properties.mobileButtonID).css({"left":0});}}});$("#"+this.properties.mainMenuWrapperID+" li").on({mouseenter:function(){$(this).find("ul").show();},mouseleave:function(){$(this).find("ul").hide();}});$("."+this.properties.mobileMenuClass).on("click",function(e){e.preventDefault();if(e.target&&e.target.nodeName==="LI"){$(e.target).children("ul").toggle();}else if(e.target&&e.target.nodeName==="A"){$(e.target).parent().children("ul").toggle();if($(e.target).hasClass("dialog-link")){return false;}else{if($(e.target).attr("href").indexOf(".pdf")!==-1){window.open($(e.target).attr("href"));}else{window.location=$(e.target).attr("href");}}}});return this;},closeMobileNavigation:function(){$(window).resize(function(){if($(this).width()>this.properties.mobileThreshold){$("body").css({"overflow":"visible"});$("#"+this.properties.mobileButtonID).removeClass(this.menuEase);$("#"+this.properties.mobileMenuWrapperID).removeClass(this.menuEase);}});return this;}};FLEX.components['jqPicture']={figureSelector:"figure.jQImage",initialize:function(){$(this.figureSelector).picture();}};FLEX.components['modal']={properties:{autoInitialize:true,dialogWrapper:"giftvanilla-modal",},modalElement:$(),dialogWrapper:"giftvanilla-modal",className:"Bolt-Notice",loadingBackground:"mask",closeBox:"icon-remove",initialize:function(){FLEX.modal=this;},popup:function(options){$("."+this.properties.dialogWrapper).remove();var content="<div class='"+this.properties.dialogWrapper+" "+options.className+"'><div class='header'><i class='icon-sort-down'></i><div class='close'><i class='icon-remove'></i> </div><div>"+options.title+"</div></div><div class='content'>"+options.content+"</div></div>";this.showLoading({msg:''});var $content=$(content).appendTo("body");this.modalElement=$content;$('.close',this.modalElement).on('click',function(){$('.mask').remove();$(this).parent().parent().slideToggle();})
this.showpopup();this.removeLoading();},showpopup:function(){var wid=this.modalElement.width();var left=($(window).width()-wid)/3.0;var hgt=this.modalElement.height();var tp=($(window).height()-hgt)/2;if(tp<0){tp=0}
this.modalElement.css({left:left}).animate({top:tp},500);},showLoading:function(options){var numMasks=$('body .mask').length;if(numMasks<=1){$('.mask').show();var content="<span class='mask' style='display: block;'></span><div class='loading-div' style='background:  url("+site_loading+") no-repeat 2px 2px;'></div>";var lft=($(window).width()-100)/2;var tp=($(window).height()-250)/2;$("body").append(content);$('.button').addClass('disabled');if(navigator.appVersion.indexOf("firefox")!=-1||navigator.appVersion.indexOf("Firefox")!=-1){}else{$('.loading-div').css({left:lft+'px'}).animate({top:tp+'px'}).fadeIn(10);}}else{this.removeLoading();}},removeLoading:function(){$('.loading-div').fadeOut(500,function(){$('input[type="submit"]').removeClass('disabled');$('input[type="submit"]').removeAttr('disabled',true);$(this).remove();});},hideLoading:function(){$('.loading-div').fadeOut(500,function(){$('.mask').fadeOut();$('.button').removeClass('disabled');$('.button').removeAttr('disabled',true);$(this).remove();});}};FLEX.components['scrollTo']={properties:{autoInitialize:true,},headerOffsetElement:'header',scrollButtonClass:'.button-scroll',buttonActive:'.active',offsetY:0,initialize:function(){var self=this;$(self.scrollButtonClass).click(function(e){var element=$(this).attr("href"),headerHeight=$(self.headerOffsetElement).outerHeight(),offsetY=self.offsetY,elementTop=$(element).offset().top;$(element).find(self.scrollButtonClass).addClass(self.buttonActive);$('html,body').animate({scrollTop:elementTop-headerHeight+offsetY},'slow');e.preventDefault();});}};FLEX.components['siteTimeout']={properties:{autoInitialize:true,},called:false,pageID:page,UserLoggedIn:UserLoggedIn,logoutUrl:'./logout.html',initialize:function(){var self=this;self.count=900;self.counter=setInterval(function(){self.timer.call(self)},1000);self.countdown=$('.warning.message').contents();self.countdownTime=$('.warning.message').contents().find('h4').html(timeoutMsg);if($('body').hasClass('home')){self.hide();}else{$('.warning.message').hide();this.StartTimers();}
$(document).click(function(){self.ResetTimers();self.hide();});$(document).keyup(function(){self.ResetTimers();self.hide();});$(document).keydown(function(){self.ResetTimers();self.hide();});return true;},hide:function(){if(this.count<=59&&this.count>0&&this.userLoggedIn!=''){FLEX.helperFunctions.emit('close_system_notification');}},timer:function(){var self=this;self.count=this.count-1;if(this.count<=59&&this.count>0){if(self.UserLoggedIn!=''){FLEX.helperFunctions.emit('open_system_notification',{class:"warning",message:timeoutMsg+" "+self.count,});}}else if(this.count<=1){clearInterval(self.counter);self.IdleTimeout();return;}
$("#timeleft").html(this.count+"sec.");},StartTimers:function(){this.timer();},ResetTimers:function(){this.count=900;clearInterval(self.counter);this.StartTimers();},IdleTimeout:function(pageID){window.location=this.logoutUrl;}};FLEX.components['print']={properties:{autoInitialize:true,},initialize:function(){FLEX.print=this.print;},print:function(selector){selector=selector||"body";var self=$(selector);if(self.size()>1){self=self.eq(0);}else if(!self.size()){return;}
$(".visible-phone",self).hide();var strFrameName=("vanillaegift-printer-"+(new Date()).getTime());var jFrame=$("<iframe name='"+strFrameName+"' class='printContainer'>");jFrame.css("width","1px").css("height","1px").css("position","absolute").css("left","-9999px").appendTo($("body:first"));var objFrame=window.frames[strFrameName];var objDoc=objFrame.document;objDoc.open();objDoc.write("<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">");objDoc.write("<html>");objDoc.write("<head>");objDoc.write("<title>");objDoc.write(document.title);objDoc.write("</title>");objDoc.write($('head').html());objDoc.write("</head>");objDoc.write("<body class='printContainer' onload='this.focus();$(\".visible-phone\").hide();this.print();'>");objDoc.write($('.print_header').html());objDoc.write('<div class="print_body">');objDoc.write($('<div>').append($('.cardSummaryContainer').clone()).html());objDoc.write(self.html());objDoc.write('</div>');objDoc.write($('.print_footer').html());objDoc.write("</body>");objDoc.write("</html>");objDoc.close();$(".visible-phone",self).show();}};FLEX.components['MaskedInput']={properties:{},initialize:function(){var self=this;var $el=$(this.element);var mask=$el.data("flex-mask");$el.mask(mask,{translation:{placeholder:mask.replace(/(\d|A)/,"_"),}});}};FLEX.components['scrolled']={properties:{autoInitialize:true,elementsTargeted:'header',scrolledSelector:'scrolled',},initialize:function(){var self=this;$(document).scroll(function(){if($(this).scrollTop()>500){$(self.properties.elementsTargeted).addClass(self.properties.scrolledSelector);}else{$(self.properties.elementsTargeted).removeClass(self.properties.scrolledSelector);}});}};FLEX.components['FloatingHeader']={properties:{immediateScroll:false,},initialize:function(){var self=this;if($(this.element).css("position").indexOf("sticky")>0){return;}
$(document).scroll(function(evt){var scrollTop=$(window).scrollTop();if(scrollTop==0||scrollTop==$(self.element).position().top){$(self.element).removeClass("floating");}else if(!self.properties.immediateScroll&&scrollTop>$(self.element).position().top+$(self.element).height()){$(self.element).addClass("floating");}else if(self.properties.immediateScroll&&scrollTop>$(self.element).position().top+1){$(self.element).addClass("floating");}});}};FLEX.components['tooltip']={parentElement:null,toolTipElement:null,properties:{tooltipPosition:"top",arrowSize:9,arrowColor:null,isSingularImage:false,centerContentOnArrow:true,message:"",messagePadding:"10px",messageBackgroundColor:"#fff",messageForegroundColor:"#000",},initialize:function(){var self=this;this.parentElement=$("<span>").addClass("tooltipContainer");$(this.element.parentNode).append(this.parentElement);this.toolTipElement=$("<div>").addClass("tooltip");$("<span>").addClass("tooltipMessage").html(this.properties.message).appendTo(this.toolTipElement);$("<div>").addClass("arrow").appendTo(this.toolTipElement);$(this.element).appendTo(this.parentElement);this.toolTipElement.appendTo(this.parentElement);this.parentElement.hover(function(){self.openTooltip();},function(){self.closeTooltip();}).click(function(){self.toggleTooltip();});return true;},openTooltip:function(){this.tooltipOpen=true;$(this.toolTipElement).css({left:-10000,display:"inline-block"});var $tMessage=$(".tooltipMessage",this.toolTipElement);var $sizingContainer=$("<span>").html(this.properties.message).addClass("sizingContainer").appendTo("body");$sizingContainer.css({position:"relative",left:-10000,"display":"inline-block",padding:this.properties.messagePadding});var width=$sizingContainer.outerWidth();var height=$sizingContainer.outerHeight();$sizingContainer.remove();var screenHeight=$(window).height();var screenWidth=$(window).width();var currentOffset=$(this.element).offset();var $arrow=$(".arrow",this.toolTipElement);var scrollTop=$(window).scrollTop();var scrollLeft=$(window).scrollLeft();$arrow.css({"border-width":this.properties.arrowSize+"px","border-color":this.properties.arrowColor||$(this.toolTipElement).css("background-color"),});var positionOrder={"top":['top','bottom','left','right'],"bottom":['bottom','top','left','right'],"left":['left','right','top','bottom'],"right":['right','left','top','bottom']};var showPosition=this.properties.tooltipPosition;var positionFound=false;for(var x in positionOrder[this.properties.tooltipPosition]){if(positionFound){break;}
var checkPosition=positionOrder[this.properties.tooltipPosition][x];switch(checkPosition){case"top":var offset=0;var rect=this.element.getBoundingClientRect();if(this.properties.centerContentOnArrow){offset=((height/2)-(this.properties.arrowSize/2));}
if(height<screenHeight){if(currentOffset.top-this.properties.arrowSize-height-scrollTop>0){if((currentOffset.left-(width-offset)-scrollLeft>0)&&(currentOffset.left+width+offset<screenWidth)){positionFound=true;showPosition="top";}}}
continue;case"bottom":var offset=0;if(this.properties.centerContentOnArrow){offset=((height/2)-(this.properties.arrowSize/2));}
if(height<screenHeight){if(currentOffset.top+this.properties.arrowSize+height<window.innerHeight+scrollTop){if((currentOffset.left-(width-offset)-scrollLeft>0)&&(currentOffset.left+width+offset<screenWidth)){positionFound=true;showPosition="bottom";}}}
continue;case"left":if(currentOffset.left-width-this.properties.arrowSize>0){positionFound=true;showPosition="left";}
continue;case"right":if(currentOffset.left+width+this.properties.arrowSize<screenWidth){positionFound=true;showPosition="right";}
continue;}}
this.showTooltip(showPosition,width,height);$tMessage.css({width:width,height:height,backgroundColor:this.properties.messageBackgroundColor,color:this.properties.messageForegroundColor,padding:this.properties.messagePadding});$(this.toolTipElement).css({display:""});if(!this.properties.centerContentOnArrow){$tMessage.css({left:0,top:0});}
$tMessage.css({display:""});this.parentElement.addClass("active");},closeTooltip:function(){this.tooltipOpen=false;this.parentElement.removeClass("active");},toggleTooltip:function(){if(this.tooltipOpen){this.closeTooltip();}else{this.openTooltip();}},showTooltip:function(position,width,height){var $arrow=$(".arrow",this.toolTipElement);var $tMessage=$(".tooltipMessage",this.toolTipElement);switch(position){case"left":$(this.toolTipElement).css({top:$(this.element).position().top+(($(this.element).height()/2)-this.properties.arrowSize),left:$(this.element).position().left-(width+(this.properties.arrowSize)),});$arrow.removeClass("left top bottom");$arrow.addClass("right");$tMessage.css({position:"absolute"});if(this.properties.centerContentOnArrow){$tMessage.css({top:((height/2)-(this.properties.arrowSize))*-1,left:(parseInt($tMessage.css("border-left-width"))+parseInt($tMessage.css("border-right-width")))*-1,});}
$arrow.css({top:0,left:"",right:(this.properties.arrowSize+width)*-1,});break;case"right":$(this.toolTipElement).css({top:$(this.element).position().top+(($(this.element).height()/2)-this.properties.arrowSize),left:$(this.element).position().left+$(this.element).width()+this.properties.arrowSize,});if(this.properties.centerContentOnArrow){$tMessage.css({top:((height/2)-(this.properties.arrowSize))*-1,left:parseInt($tMessage.css("border-left-width"))+parseInt($tMessage.css("border-right-width")),});}
$arrow.removeClass("right top bottom");$arrow.addClass("left");$arrow.css({top:0,right:"",left:this.properties.arrowSize*-1,});break;case"top":$(this.toolTipElement).css({top:$(this.element).position().top-height-this.properties.arrowSize,left:($(this.element).position().left+$(this.element).width()/2)-this.properties.arrowSize,});if(this.properties.centerContentOnArrow){$tMessage.css({top:(parseInt($tMessage.css("border-bottom-width"))+parseInt($tMessage.css("border-top-width")))*-1,left:((width/2)-(this.properties.arrowSize))*-1,});}
$arrow.removeClass("left top right");$arrow.addClass("bottom");$arrow.css({top:height,right:"",left:0,});break;case"bottom":$(this.toolTipElement).css({top:$(this.element).position().top+$(this.element).outerHeight()+this.properties.arrowSize,left:($(this.element).position().left+$(this.element).width()/2)-this.properties.arrowSize,});if(this.properties.centerContentOnArrow){$tMessage.css({top:parseInt($tMessage.css("border-bottom-width"))+parseInt($tMessage.css("border-top-width")),left:((width/2)-(this.properties.arrowSize))*-1,});}
$arrow.removeClass("left bottom right");$arrow.addClass("top");$arrow.css({top:this.properties.arrowSize*-1,right:"",left:0,});break;default:break;}}}
document.addEventListener('DOMContentLoaded',function(){FLEX.init();var event=createNewEvent('FLEXInitialized');document.dispatchEvent(event);});}());function createNewEvent(eventName){if(typeof(Event)==='function'){var event=new Event(eventName);}else{var event=document.createEvent('Event');event.initEvent(eventName,true,true);}
return event;}
$(document).on('valid_form_submit',function(evt,obj){if(obj.form.id=='newsletter'){var values=$(obj.form).serialize();var dataString=JSON.stringify(values);WLGift.BoltModal.showLoading();$.ajax({type:'POST',url:"./saveNewsletterSignupEmailPost.json",dataType:'json',data:dataString,contentType:'application/json',mimeType:'application/json',success:function(data){error_code=0;success_message="";if(data.length>0){$.each(data,function(server_code,message){if(message.server_code!=''&&message.message!=''){error_code=message.error_code;success_message=message.message;return false;}});}
if(success_message!=''&&error_code<=0){FLEX.helperFunctions.emit('open_system_notification',{class:"success",message:success_message});$("input[type='text']").val("");}else{if(success_message==''){success_message="An unknown error occurred";}
FLEX.helperFunctions.emit('open_system_notification',{class:"error",message:success_message});}
WLGift.BoltModal.removeLoading();$('.mask').remove();}});}});$(document).on('valid_form_submit',function(evt,obj){if(obj.form.id=='cardTypeForCardNumber'){var values=$(obj.form).serialize();var dataString=JSON.stringify(values);WLGift.BoltModal.showLoading();$.ajax({type:'POST',url:"./getCardType.json",dataType:'json',data:dataString,contentType:'application/json',mimeType:'application/json',success:function(data){error_code=0;if(data.length>0){$.each(data,function(server_code,message){if(message.server_code!=''&&message.message!=''){error_code=message.error_code;success_message=message.message;return false;}});}
if(success_message!=''&&error_code<=0){FLEX.helperFunctions.emit('open_system_notification',{class:"success",message:success_message});$("#cardNumber").val("");}else{FLEX.helperFunctions.emit('open_system_notification',{class:"error",message:success_message});}
WLGift.BoltModal.removeLoading();$('.mask').remove();}});}});